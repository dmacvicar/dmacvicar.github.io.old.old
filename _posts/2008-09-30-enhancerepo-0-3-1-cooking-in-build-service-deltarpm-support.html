---
layout: post
title: 'enhancerepo 0.3.1 cooking in build service: deltarpm support'
date: 2008-09-30 23:35:47.000000000 +02:00
type: post
published: true
status: publish
categories: []
tags:
- enhancerepo
- newsuse
- rpmmd
- software
- suse
- yum
- zypp
meta:
  posterous_6c96d52da40a5d7e34be538822acc826_post_id: '48644994'
  posterous_6c96d52da40a5d7e34be538822acc826_permalink: http://duncan.mac-vicar.com/enhancerepo-031-cooking-in-build-service-delt
  _oembed_a2e554f36fc76464649bed7eea25c5b4: "{{unknown}}"
  _oembed_5dac7ce4885c2f1187b55d6356cd1a19: "{{unknown}}"
  _oembed_377d97c5a037238b085ea4f9ad54f2ee: "{{unknown}}"
  _oembed_806193dca6c2d7cac126a1bffb535dc4: "{{unknown}}"
  _oembed_0dbc7391e8625ef560239d306a2f4f5b: "{{unknown}}"
  _oembed_3e04b5c615977090e24968ec1907b4cb: "{{unknown}}"
  _oembed_8c7d201522792e2c96b1bea2249b90e7: "{{unknown}}"
  _oembed_6106a07f28b888ea36996db9d316cb12: "{{unknown}}"
  _oembed_213bc090d6ecf7414d672da1ebe1db9d: "{{unknown}}"
  _oembed_9d7ffc969c8b7624635e034d7be540a9: "{{unknown}}"
  _oembed_dab3a6d3939a22108530dbf3c8b9c364: "{{unknown}}"
  _oembed_1470aa696d754242976bfffdff945ad3: "{{unknown}}"
  _oembed_178694e1325217c3674f5daf445ec5b3: "{{unknown}}"
  _oembed_799b50d67e0efd83bc97531774d69855: "{{unknown}}"
  _oembed_ca9389da226c9d0e42df0da10c32fc07: "{{unknown}}"
  _oembed_ef4af982cef7393786c852e6b33d4b86: "{{unknown}}"
  _oembed_56d68b4b7888ce5d8fb849ffe3794e2a: "{{unknown}}"
  _oembed_03d701863ca90ec63e5e62b36680cf6e: "{{unknown}}"
  _oembed_67726e08da50f95e4ed505fd3e116d47: "{{unknown}}"
  _oembed_bc3898905ca634159d17602ab3e10a59: "{{unknown}}"
  _oembed_c7ca7e5c025aced56410973260d0bec3: "{{unknown}}"
author:
  login: duncan
  email: dmacvicar@gmail.com
  display_name: duncan
  first_name: Duncan
  last_name: Mac-Vicar P.
---
<p>
    A new version of [enhancerepo][1] (0.3.1) is cooking itself in [the build service][2].</p>
<p>The new feature is deltarpm metadata generation support and also some kind of smart deltarpm generation.</p>
<p>This means, enhancerepo can look which package has several versions in the repository, and generate delta rpms for N steps to the older versions. The default is one step, that is, only a delta rpm to the newest to the previous one. And then it can generate the metadata for you too (and add it to the index and such).</p>
<p>Example run:</p>
<div class="CodeRay">
<div class="code">
<pre># enhancerepo --disk-usage --keywords --eulas --create-deltas 2 --deltas -- /space/repo/duncan2
Adding eula: /space/repo/duncan2/zapping-0.9.6-72.eula to zapping-0.9.6-72-i586
Adding eula: /space/repo/duncan2/zaptel.eula to zaptel-1.2.10-70-i586
Adding keyword: /space/repo/duncan2/zaptel-debuginfo.keywords to zaptel-debuginfo-1.2.10-70-i586
Preparing disk usage...
Creating delta - amarok-1.4.10-3-i586 -&gt; amarok-1.4.10-17-i586 (1/2)
Creating delta - amarok-1.4.9.1-53-i586 -&gt; amarok-1.4.10-17-i586 (2/2)
Saving /space/repo/duncan2/repodata/susedata.xml.gz ..
Adding /space/repo/duncan2/repodata/susedata.xml.gz to /space/repo/duncan2/repodata/repomd.xml index
repodata/susedata.xml.gz already exists. Replacing.
Saving /space/repo/duncan2/repodata/deltainfo.xml.gz ..
Adding /space/repo/duncan2/repodata/deltainfo.xml.gz to /space/repo/duncan2/repodata/repomd.xml index
repodata/deltainfo.xml.gz already exists. Replacing.
Saving /space/repo/duncan2/repodata/repomd.xml ..</pre>
</div>
</div>
<p>Some important notes:</p>
<p>* It now requires ruby-rpm, which is available on the [devel:languages:ruby:extensions][3] repository.<br />
* Be careful with running createrepo on top of a directory with deltarpms. createrepo will index them incorrectly as packages (So clean deltarpms, run createrepo, and then generate deltas with enhancerepo on top).<br />
* I did not test this release as much as the latest :-)</p>
<p> [1]: <a href="http://en.opensuse.org/Enhancerepo">http://en.opensuse.org/Enhancerepo</a><br />
 [2]: <a href="http://software.opensuse.org/search?q=enhancerepo">http://software.opensuse.org/search?q=enhancerepo</a><br />
 [3]: <a href="http://software.opensuse.org/search?q=ruby-rpm">http://software.opensuse.org/search?q=ruby-rpm</a></p>
