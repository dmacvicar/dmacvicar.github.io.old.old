---
layout: post
title: mounting from scripts
date: 2007-01-23 05:42:25.000000000 +01:00
type: post
published: true
status: publish
categories: []
tags: []
meta:
  posterous_6c96d52da40a5d7e34be538822acc826_post_id: '48643821'
  posterous_6c96d52da40a5d7e34be538822acc826_permalink: http://duncan.mac-vicar.com/mounting-from-scripts
author:
  login: duncan
  email: dmacvicar@gmail.com
  display_name: duncan
  first_name: Duncan
  last_name: Mac-Vicar P.
---
<p>
    I had a script that mounted my usb hard disk and backup some folders to it. However from one day to another HAL refused to mount automatically a device listed in fstab, and I was required to have it listed there so I could run the backup script as user. If the device was listed in fstab, then KDE automatic mounting when clicking on the icon did not work anymore.</p>
<p>But KDE is cool, so another solution was possible. I removed the fstab entry, and the script now calls the media manager directly via dcop:</p>
<p>    dcop kded mediamanager mount<br />
      "/org/freedesktop/Hal/devices/volume_uuid_1839914b_3f70_4e47_97a9_497074d9732d"<br />
    rsync -a --delete --stats --progress<br />
      /home/duncan/Documents /media/extdisk/backup<br />
    dcop kded mediamanager unmount<br />
      "/org/freedesktop/Hal/devices/volume_uuid_1839914b_3f70_4e47_97a9_497074d9732d"</p>
<p>Now everything works fine.</p>
<p>It was not easy to figure out the problem was the device being listed in fstab. When it was listed, if you click the icon, the media manager complained a non sense permissions message. HAL logs showed the true.</p>
