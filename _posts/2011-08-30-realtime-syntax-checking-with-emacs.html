---
layout: post
title: Realtime syntax checking with emacs
date: 2011-08-30 12:22:33.000000000 +02:00
type: post
published: true
status: publish
categories:
- Software
tags:
- c
- emacs
- ruby
- suse
meta:
  _edit_last: '34818'
  _oembed_d2f780293d19786a1713b8a5f9f4e731: "{{unknown}}"
  _oembed_21939bf26a38d6e093508a697fc483f8: "{{unknown}}"
  _oembed_7b39cbc04b79bd0ef29d7585f9bfa99c: "{{unknown}}"
  _oembed_4630853c84d3bba1d1c3e85885c57ad8: "{{unknown}}"
  _oembed_d5c009ea7ae957e8e2f4fe1889d641f1: "{{unknown}}"
author:
  login: duncan
  email: dmacvicar@gmail.com
  display_name: duncan
  first_name: Duncan
  last_name: Mac-Vicar P.
---
<p><em><strong>Note: this post is a web cache recover of a November 2010 post that got lost with the blog crash. I updated it to add C/C++ autocompletion.</strong></em></p>
<p>One of the nice features of fat IDEs is that you get real time syntax checking. Some languages make it easy, some not.</p>
<p>For example Eclipse has access to the compiler as a service inside the IDE, and it checks the code as you type, even suggesting fixes.</p>
<p>I started to research what could be done on the emacs side to get a better experience, as when I am coding, I am usually thinking at the same time I write, and this means I make more syntax errors than the average guy.</p>
<p>So I found <a href="http://flymake.sourceforge.net/" title="flymake">flymake</a>, which is included by default in the emacs package. Copy pasting some snippets from the <a href="http://www.emacswiki.org/emacs/FlyMake" title="Emacs Wiki">emacs wiki</a> I got really nice real time checking for ruby:</p>
<p><a href="http://duncan.files.wordpress.com/2011/08/ruby-1.png"><img src="{{ site.baseurl }}/assets/ruby-1.png?w=300" alt="" title="Ruby syntax checking" width="300" height="292" class="alignnone size-medium wp-image-1419" /></a></p>
<p>Going forward with python was easy. A flymake extension that uses pyflakes (a python checking program) was already available.</p>
<p><a href="http://duncan.files.wordpress.com/2011/08/python-1.png"><img src="{{ site.baseurl }}/assets/python-1.png?w=300" alt="" title="Python syntax checking" width="300" height="292" class="alignnone size-medium wp-image-1421" /></a></p>
<p>It was with C/C++ where things started to get more complicated. Flymake has support for those hardcoded so that make with a special target is invoked. I wanted to check the current file only. Also gcc syntax errors are not that good.</p>
<p>So I started to modify the extensions I had seen to use <a href="http://clang.llvm.org/" title="clang">clang (and clang++)</a> from the <a href="http://www.llvm.org" title="LLVM Project">LLVM</a> project. Once it worked, I got nice error messages on C/C++ files:</p>
<p><a href="http://duncan.files.wordpress.com/2011/08/c-1.png"><img src="{{ site.baseurl }}/assets/c-1.png?w=300" alt="" title="C/C++ Syntax checking" width="300" height="292" class="alignnone size-medium wp-image-1422" /></a></p>
<p>I was so happy to have this working on C++ that I needed more to challenge my new acquired mastery. So I decided to try it with <a href="http://doc.opensuse.org/projects/YaST/openSUSE11.1/tdg/Book-YCPLanguage.html" title="YCP language">ycp</a>. Not that I code with it that often, but I have colleagues who do. After adapting the extensions, here is the result:</p>
<p><a href="http://duncan.files.wordpress.com/2011/08/ycp-1.png"><img src="{{ site.baseurl }}/assets/ycp-1.png?w=300" alt="" title="YCP Syntax checking" width="300" height="292" class="alignnone size-medium wp-image-1424" /></a></p>
<p>You can find all the required files on my <a href="https://github.com/dmacvicar/duncan-emacs-setup" title="Duncan emacs setup">emacs setup repository</a>. Follow custom.el which goes to custom-$lang.el to site-lisp/flymake-$lang.el.</p>
<p><strong>Update 20.11.2010:</strong></p>
<p>Thanks to <a href="http://mnemonikk.org/2010/11/05/using-flymake-to-check-erb-templates/">this post</a> I managed to get also Rails .erb templates working. Those are more tricky as they canâ€™t be parsed directly by ruby, but they have to go first through erb -x and then through ruby -c. I ported the script to the style of loading (init and load functions) I was already using.</p>
<p><strong>Update 30.08.2011:</strong></p>
<p>Thanks to <a href="https://github.com/brianjcj/auto-complete-clang">this autocomplete extension</a>, I was able to setup autocompletion using clang for C/C++. Here is how it looks like:</p>
<p><a href="http://duncan.files.wordpress.com/2011/08/c-2.png"><img src="{{ site.baseurl }}/assets/c-2.png?w=300" alt="" title="C++/C autocompletion" width="300" height="292" class="alignnone size-medium wp-image-1427" /></a></p>
<p>Next! ruby autocompletion.</p>
