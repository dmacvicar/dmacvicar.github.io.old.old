---
layout: post
title: Picasa 3.8 on Linux (and fix web albums login on the way)
date: 2011-10-03 16:27:30.000000000 +02:00
type: post
published: true
status: publish
categories:
- Software
tags:
- google
- linux
- picasa
- suse
meta:
  _edit_last: '34818'
author:
  login: duncan
  email: dmacvicar@gmail.com
  display_name: duncan
  first_name: Duncan
  last_name: Mac-Vicar P.
---
<p>Today I found myself with Picasa for Linux (3.0 beta) not allowing me to login to web albums, even if I could login without problems from the web browser.</p>
<p>After googling a bit, it seems that Picasa 3.0 does not work anymore due to some Google+ related changes. On the other hand it looks like Picasa on Linux is abandoned Â ie: 3.0 vs 3.8 on Windows.</p>
<p>Picasa 3.8 has some <a href="http://picasa.google.com/support/bin/answer.py?hl=en&amp;answer=93773">interesting new features</a>. Why not a Linux version? Picasa for Linux is no more than Picasa for Windows bundled with <a href="http://www.winehq.org/">wine</a> plus some minor changes. Ok, lets do one ourselves.</p>
<p>I started by unpacking the original rpm and replacing the "Picasa3" folder in "Program Files" with the tarred content of the "Program Files/Picasa3" resulting from installing Picasa 3.8 with wine. That worked, but it requires you to create this tarball.</p>
<p>Then I went one step further: why not trying installing the newer Picasa 3.8 inside the build section of the .spec file? Thanks to the <a href="http://wpkg.org/Picasa">wpkg project</a> I figured how to run the installer in unattended mode. The Build Service Tips &amp; Tricks page <a href="http://en.opensuse.org/openSUSE:Build_Service_Tips_and_Tricks#Building_a_package.2C_which_needs_an_X-Server_during_build">explains how to run something that requires an X server using XVfb</a>.</p>
<p>So the spec file first unpacks the original Linux rpm in the builroot. Then runs the Windows-based installer in unattended mode using a temporary wine prefix, and then copies the new installed Picasa over to the buildroot, replacing the files in the original rpm. We use the official rpm as a base because it contains a custom wine and some other Linux integrations, however it would be worth to see if it behaves better with newer wine versions.</p>
<p>You can find the resulting <a href="https://build.opensuse.org/package/show?package=picasa&amp;project=home%3Admacvicar">.spec file in my home project</a>.</p>
<p>I can't redistribute the original rpm and the windows installer, so I include a fetch.sh (just like the spec file for the nvidia driver does) that will fetch those binary files.</p>
<p>To build it:</p>
<p><code><br />
osc co home:dmacvicar picasa<br />
# get the files I can't redistribute<br />
./fetch<br />
osc build openSUSE_Factory<br />
</code></p>
<p>Now install it and you should have Picasa 3.8 on Linux, which also solves the issue of login into Picasaweb:</p>
<p><a href="http://duncan.files.wordpress.com/2011/10/about-picassa.png"><img class="alignnone size-medium wp-image-1449" title="about-picassa" src="{{ site.baseurl }}/assets/about-picassa.png?w=300" alt="" width="300" height="234" /></a></p>
