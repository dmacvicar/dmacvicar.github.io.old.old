---
layout: post
title: Factory and package guidelines
date: 2011-09-19 15:46:18.000000000 +02:00
type: post
published: true
status: publish
categories:
- Software
tags:
- suse
meta:
  _edit_last: '34818'
author:
  login: duncan
  email: dmacvicar@gmail.com
  display_name: duncan
  first_name: Duncan
  last_name: Mac-Vicar P.
---
<p>I see some changes going into Factory that apply current packaging guidelines to packages.</p>
<p>To summarize some of the cleanups you can find as submit requests: (no guarantee that those are actual guidelines. <a href="http://en.opensuse.org/Portal:Packaging">Check yourself</a>)</p>
<li>Remove redundant information:<br />
[sourcecode language="diff"]<br />
-# spec file for package dom4j (Version 1.6.1)<br />
+# spec file for package dom4j<br />
[/sourcecode]
</li>
<li>Remove norootforbuild comment<br />
[sourcecode language="diff"]<br />
-# norootforbuild<br />
[/sourcecode]
</li>
<li>Remove AutoReqProv: on (I guess because it is on by default)<br />
[sourcecode language="diff"]<br />
-AutoReqProv: on<br />
[/sourcecode]
</li>
<li>Remove Authors list from description:<br />
[sourcecode language="diff"]<br />
-Authors:<br />
----------<br />
-  Bob Esponja<br />
-  Peter Parker<br />
[/sourcecode]
</li>
<li>New macro for parallel builds:<br />
[sourcecode language="diff"]<br />
-make %{?jobs:-j%jobs}<br />
+make %{?_smp_mflags}<br />
[/sourcecode]
</li>
<li>Put test runs in the %check section:<br />
[sourcecode language="diff"]<br />
+%check<br />
+<br />
make check<br />
[/sourcecode]
</li>
<li>Don't clean the builroot yourself:<br />
[sourcecode language="diff"]<br />
%install<br />
-rm -rf $RPM_BUILD_ROOT<br />
[/sourcecode]
</li>
<li>No clean section (is it now done automatically?:<br />
[sourcecode language="diff"]<br />
-%clean<br />
-rm -rf $RPM_BUILD_ROOT<br />
-[/sourcecode]
</li>
