---
layout: post
title: Solving the famous “smart” case 3
date: 2008-05-17 06:41:33.000000000 +02:00
type: post
published: true
status: publish
categories: []
tags:
- smart
- yast
- yum
- zypp
meta:
  posterous_6c96d52da40a5d7e34be538822acc826_post_id: '48644743'
  posterous_6c96d52da40a5d7e34be538822acc826_permalink: http://duncan.mac-vicar.com/solving-the-famous-smart-case-3
  _oembed_7db31d15c973ef12029b81914aab7375: "{{unknown}}"
  _oembed_13f8dd65301da1b808c4519a1f703f67: "{{unknown}}"
  _oembed_191a92cb6cd1f5bced3838e34a79b4fe: "{{unknown}}"
  _oembed_90d04eba4b8518da1faea17a5a62863b: "{{unknown}}"
  _oembed_c06e40479ff8ef50bf4b26d94c70c123: "{{unknown}}"
  _oembed_83d478c8d0111db082ae488944cda894: "{{unknown}}"
  _oembed_025b1823a1fdf2ed2148bd5f2534df27: "{{unknown}}"
  _oembed_a92073a5592a38a11c199ff146c1561c: "{{unknown}}"
  _oembed_ac2271185eb8c30e04de8fbb414592f8: "{{unknown}}"
  _oembed_0ce89c2954824495734f9e893b7e2ec3: "{{unknown}}"
  _oembed_fbc641663a689a2cb3ff290b0de17840: "{{unknown}}"
  _oembed_19f3a38a5f9b3837cb0f9ffe42efc15f: "{{unknown}}"
  _oembed_158f1e48e13ba0c4dee04b25c177b027: "{{unknown}}"
  _oembed_011cb53b7109036b801e3a5aa2c25ed6: "{{unknown}}"
author:
  login: duncan
  email: dmacvicar@gmail.com
  display_name: duncan
  first_name: Duncan
  last_name: Mac-Vicar P.
---
<p>
    In my [last post][1], I showed how sat-solver (solver's ZYpp uses) would solve correctly the "case 2" included in [smart's README][5], an exercise smart uses to claim its "smartness" (because apt and yum can't handle them).</p>
<p>How does it with case 3?</p>
<p>&gt;That's another interesting case which was tested with APT-RPM and YUM.<br />
&gt;<br />
&gt;In this case, there's a package `A` version 1.0 installed in the<br />
&gt;system, and there are two versions available for upgrading: 1.5 and 2.0.<br />
&gt;Version 1.5 may be installed without problems, but version 2.0 has a<br />
&gt;dependency on `B`, which is not available anywhere.<br />
&gt;<br />
&gt;In this case, the best possibility is upgrading to 1.5, since upgrading<br />
&gt;to 2.0 is not an option.</p>
<p>Here both yum and apt fail:</p>
<p>&gt;Just like APT, YUM selected version 2.0 and didn't consider the<br />
&gt;availability of an intermediate version.</p>
<p>But smart does the right thing:</p>
<p>&gt;Smart correctly selects the intermediate version 1.5, which is the<br />
&gt;only viable possibility given the current options.</p>
<p>So, we setup a repository [packages.xml][2] with A version 1.5 and 2.0 ( 2.0 requiring an non-existing B) and a [system.xml][3] representing the installed packages, with only A 1.0 installed. We put all together in a [test.xml][4] file, and select a "upgrade" action.</p>
<p>We run the already introduced deptestomatic:</p>
<div class="CodeRay">
<div class="code">
<pre># deptestomatic test.xml
&gt;!&gt; Solution #1:
&gt;!&gt; upgrade A-1.0-1.noarch =&gt; A-1.5-1.noarch[test]
&gt;!&gt; !unflag A-2.0-1.noarch[test]
&gt;!&gt; installs=0, upgrades=1, uninstalls=0</pre>
</div>
</div>
<p>And we confirm, that ZYpp (sat-solver) would also select A 1.5 as expected.</p>
<p> [1]: <a href="http://duncan.mac-vicar.com/blog/archives/310">http://duncan.mac-vicar.com/blog/archives/310</a><br />
 [2]: <a href="http://pastebin.com/f1811aef8">http://pastebin.com/f1811aef8</a><br />
 [3]: <a href="http://pastebin.com/f49446f8b">http://pastebin.com/f49446f8b</a><br />
 [4]: <a href="http://pastebin.com/f2658140e">http://pastebin.com/f2658140e</a><br />
 [5]: <a href="http://svn.labix.org/smart/trunk/README">http://svn.labix.org/smart/trunk/README</a></p>
